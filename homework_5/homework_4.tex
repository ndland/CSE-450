\documentclass{article}

\usepackage{fancyhdr}
\usepackage{extramarks}
\usepackage{minted}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{inconsolata}
\usepackage{multicol}
\usepackage{enumitem}

%
% Basic Document Settings
%

\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

\linespread{1.1}

\pagestyle{fancy}
\lhead{\hmwkAuthorName}
\chead{\hmwkClass: \hmwkTitle}
\rhead{\firstxmark}
\lfoot{\lastxmark}
\cfoot{\thepage}

\renewcommand\headrulewidth{0.4pt}
\renewcommand\footrulewidth{0.4pt}

\setlength\parindent{0pt}

%
% Create Problem Sections
%

\newcommand{\enterProblemHeader}[1]{
\nobreak\extramarks{}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
\nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
}

\newcommand{\exitProblemHeader}[1]{
\nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
\stepcounter{#1}
\nobreak\extramarks{Problem \arabic{#1}}{}\nobreak{}
}

\setcounter{secnumdepth}{0}
\newcounter{partCounter}
\newcounter{homeworkProblemCounter}
\setcounter{homeworkProblemCounter}{1}
\nobreak\extramarks{Problem \arabic{homeworkProblemCounter}}{}\nobreak{}

%
% Homework Problem Environment
%
% This environment takes an optional argument. When given, it will adjust the
% problem counter. This is useful for when the problems given for your
% assignment aren't sequential. See the last 3 problems of this template for an
% example.
%
\newenvironment{homeworkProblem}[1][-1]{
\ifnum#1>0
\setcounter{homeworkProblemCounter}{#1}
\fi
\section{Problem \arabic{homeworkProblemCounter}}
\setcounter{partCounter}{1}
\enterProblemHeader{homeworkProblemCounter}
}{
\exitProblemHeader{homeworkProblemCounter}
}

%
% Homework Details
%   - Title
%   - Due date
%   - Class
%   - Section/Time
%   - Instructor
%   - Author
%

\newcommand{\hmwkTitle}{Homework\ \#4}
\newcommand{\hmwkDueDate}{March 23, 2016}
\newcommand{\hmwkClass}{Operating Systems}
\newcommand{\hmwkClassTime}{Monday \& Wednesday 3:30pm --- 5:17pm}
\newcommand{\hmwkClassInstructor}{Professor Qu}
\newcommand{\hmwkAuthorName}{Nicholas Land}

%
% Title Page
%

\title{
\vspace{2in}
\textmd{\textbf{\hmwkClass:\ \hmwkTitle}}\\
\normalsize\vspace{0.1in}\small{Due\ on\ \hmwkDueDate\ at 11:59pm}\\
\vspace{0.1in}\large{\textit{\hmwkClassInstructor\ \\ \hmwkClassTime}}
\vspace{3in}
}

\author{\textbf{\hmwkAuthorName}}
\date{}

\renewcommand{\part}[1]{\textbf{\large Part \Alph{partCounter}}\stepcounter{partCounter}\\}

%
% Various Helper Commands
%

% Alias for the Solution section header
\newcommand{\solution}{\textsc{\textbf Solution}\\}

% Alias for bold small caps
\newcommand{\smallcaps}[1]{\textsc{\textbf #1}\\}

\begin{document}

  \maketitle
  \pagebreak

  \begin{homeworkProblem}
    Answer the following questions

    \begin{enumerate}[label=(\alph*)]
      \item Describe a real-life deadlock situation. Explain why it satisfies the four necessary conditions (mutual exclusion, hold-and-wait, non-preemption, circular wait). How do people recover from that situation? \\
      Upon recovery, which condition becomes false?
      \item Give an example, where the system is not in a safe state, but if the processes of the system are allowed to be executed, then they will be successfully completed.
    \end{enumerate}

    \solution

    \begin{enumerate}[label=(\alph*)]
      \item An example of a real life deadlock would be something like a person trying to get a professional job, but are unable to because they lack the experience to get the job. However, to get the experience, they need to have a job. This satisfies the four condtions of deadlock as follows:
      \begin{itemize}
        \item \smallcaps{Mutual Exclusion} One of the things (get a professional job) is unable to occur because it is dependent on the other (experience), and visa-versa.
        \item \smallcaps{Hold and Wait} This is essentially the same as the previous bullet point.
        \item \smallcaps{No Preemption} This holds because you can't get one without the other. As a result, none of the two 'proceeses` could preempt one another.
        \item \smallcaps{Circular Wait} This condition is satisfied because if you want the job, you need the experience, if you want the expirenece, you need the job. That is a continuous cycle.
      \end{itemize}
      People are able to recover from such deadlock by getting an internship, or an apprenticeship which will give them the experience that they need to get the job. The condition that becomes false is the circular wait. Now, the person has experience and is able to obtain the professional job.

      \item Like in the previous example I provided, if the user were able to obtain an internship, then the processes could execute as normal, and all four condtions of deadlock would be satisfied. In this case deadlock would not occur.
    \end{enumerate}
  \end{homeworkProblem}

  \begin{homeworkProblem}
    Consider the following snapshot of a system (P=Process, R=Resource) :

    \begin{center}
      \begin{tabular}{|c|c|c|c|}
        \hline
        \multicolumn{4}{|c|}{Available} \\
        \hline
        $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
        \hline
        1 & 5 & 2 & 0 \\
        \hline
      \end{tabular}
    \end{center}

    \pagebreak

    \begin{center}
      \begin{multicols}{2}
        \begin{tabular}{|c|c|c|c|c|}
          \hline
          \multicolumn{5}{|c|}{Maximum Demand} \\
          \hline
          & $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          $P_0$ & 0 & 3 & 1 & 2 \\
          \hline
          $P_1$ & 1 & 7 & 5 & 0 \\
          \hline
          $P_2$ & 2 & 3 & 5 & 6 \\
          \hline
          $P_3$ & 0 & 6 & 5 & 2 \\
          \hline
          $P_4$ & 0 & 6 & 5 & 6 \\
          \hline
        \end{tabular}

        \begin{tabular}{|c|c|c|c|c|}
          \hline
          \multicolumn{5}{|c|}{Current Allocation} \\
          \hline
          & $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          $P_0$ & 0 & 0 & 1 & 2 \\
          \hline
          $P_1$ & 1 & 0 & 0 & 0 \\
          \hline
          $P_2$ & 1 & 3 & 5 & 4 \\
          \hline
          $P_3$ & 0 & 6 & 3 & 2 \\
          \hline
          $P_4$ & 0 & 0 & 1 & 4 \\
          \hline
        \end{tabular}
      \end{multicols}
    \end{center}

    Answer the following questions using banker's algorithm:

    \begin{enumerate}[label=\alph*)]
      \item Calcualtes the \textit{Needs} matrix:
      \begin{center}
        \begin{tabular}{|c|c|c|c|c|}
          \hline
          \multicolumn{5}{|c|}{Needs} \\
          \hline
          & $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          $P_0$ & & & & \\
          \hline
          $P_1$ & & & & \\
          \hline
          $P_2$ & & & & \\
          \hline
          $P_3$ & & & & \\
          \hline
          $P_4$ & & & & \\
          \hline
        \end{tabular}
      \end{center}

      \item Is the system in a safe state?  If so, show how you derive a safe order with Safety Algorithm in which the processes can run. Show the different values of the work vector after each iteration. What is the sequence of processes that the algorithm implicitly created?

      \item If a request from process $P_0$ arrives for (0, 3, 0, 0), can the request be granted immediately? Justify your answer, using only the knowledge of the sequence you found at sub-question (b).
    \end{enumerate}

    \solution

    \begin{enumerate}[label=\alph*)]
      \item Needs Matrix:
      \begin{center}
        \begin{tabular}{|c|c|c|c|c|}
          \hline
          \multicolumn{5}{|c|}{Needs} \\
          \hline
          & $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          $P_0$ & 0 & 3 & 0 & 0 \\
          \hline
          $P_1$ & 0 & 7 & 5 & 0 \\
          \hline
          $P_2$ & 1 & 0 & 0 & 2 \\
          \hline
          $P_3$ & 0 & 0 & 2 & 0 \\
          \hline
          $P_4$ & 0 & 6 & 4 & 2 \\
          \hline
        \end{tabular}
      \end{center}

      \item Derived safe state: \\
      Initial Work:
      \begin{center}
        \begin{tabular}{|c|c|c|c|}
          \hline
          \multicolumn{4}{|c|}{Work} \\
          \hline
          $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          1 & 5 & 2 & 0 \\
          \hline
        \end{tabular}
      \end{center}
      \textbf{Derived safe order}: \\
      <$P_0$>
      \begin{center}
        \begin{tabular}{|c|c|c|c|}
          \hline
          \multicolumn{4}{|c|}{Work} \\
          \hline
          $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          1 & 5 & 3 & 2 \\
          \hline
        \end{tabular}
      \end{center}

      \pagebreak

      \textbf{Derived safe order}: \\
      <$P_0$, $P_2$>
      \begin{center}
        \begin{tabular}{|c|c|c|c|}
          \hline
          \multicolumn{4}{|c|}{Work} \\
          \hline
          $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          2 & 8 & 8 & 6 \\
          \hline
        \end{tabular}
      \end{center}

      \textbf{Derived safe order}: \\
      <$P_0$, $P_2$, $P_3$>
      \begin{center}
        \begin{tabular}{|c|c|c|c|}
          \hline
          \multicolumn{4}{|c|}{Work} \\
          \hline
          $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          2 & 14 & 11 & 8 \\
          \hline
        \end{tabular}
      \end{center}

      \textbf{Derived safe order}: \\
      <$P_0$, $P_2$, $P_3$, $P_4$>
      \begin{center}
        \begin{tabular}{|c|c|c|c|}
          \hline
          \multicolumn{4}{|c|}{Work} \\
          \hline
          $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          2 & 14 & 12 & 12 \\
          \hline
        \end{tabular}
      \end{center}

      \textbf{Derived safe order}: \\
      <$P_0$, $P_2$, $P_3$, $P_4$, $P_1$>
      \begin{center}
        \begin{tabular}{|c|c|c|c|}
          \hline
          \multicolumn{4}{|c|}{Work} \\
          \hline
          $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          3 & 14 & 12 & 12 \\
          \hline
        \end{tabular}
      \end{center}

      \item The request for $P_0$ can be granted immediately. This is possible because we know that the initial work is:
      \begin{center}
        \begin{tabular}{|c|c|c|c|}
          \hline
          \multicolumn{4}{|c|}{Work} \\
          \hline
          $R_a$ & $R_b$ & $R_c$ & $R_d$ \\
          \hline
          1 & 5 & 2 & 0 \\
          \hline
        \end{tabular}
      \end{center}

      The request of (0,3,0,0) does not exceed the available work of (1,5,2,0). As stated in the previous answer, $P_0$ is the first process in the derived safe order.
    \end{enumerate}
  \end{homeworkProblem}
\end{document}
